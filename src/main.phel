(ns cli-skeleton\main)

(defmacro time
  "Evaluates expr and prints the time it took.  Returns the value of expr."
  [expr]
  (let [start (gensym)
        ret (gensym)]
    `(let [,start (php/microtime true)
           ,ret ,expr]
       (println "Elapsed time:" (* 1000 (- (php/microtime true) ,start)) "msecs")
       ,ret)))

(when-not *build-mode*
  (println (time (do (php/sleep 1) :well-slept))))
